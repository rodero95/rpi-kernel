<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver: dwc_otg_pcd_intr.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>dwc_otg_pcd_intr.c File Reference</h1>This file contains the implementation of the PCD Interrupt handlers. <a href="#_details">More...</a>
<p>
<code>#include "<a class="el" href="dwc__otg__pcd_8h-source.html">dwc_otg_pcd.h</a>"</code><br>

<p>
<a href="dwc__otg__pcd__intr_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a0" doxytag="dwc_otg_pcd_intr.c::DEBUG_EP0"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DEBUG_EP0</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>CLEAR_IN_EP_INTR</b>(__core_if, __epnum, __intr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>CLEAR_OUT_EP_INTR</b>(__core_if, __epnum, __intr)</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a3" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_update_otg"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a3">dwc_otg_pcd_update_otg</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const unsigned reset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function updates OTG. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a4" doxytag="dwc_otg_pcd_intr.c::print_ep0_state"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a4">print_ep0_state</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function prints the ep0 state for debug purposes. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a5" doxytag="dwc_otg_pcd_intr.c::print_memory_payload"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a5">print_memory_payload</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function calculate the size of the payload in the memory for out endpoints and prints size for debug purposes(used in 2.93a DevOutNak feature). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a6" doxytag="dwc_otg_pcd_intr.c::get_in_ep"></a>
<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a6">get_in_ep</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, uint32_t ep_num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function returns pointer to in ep struct with number ep_num. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a7" doxytag="dwc_otg_pcd_intr.c::get_out_ep"></a>
<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a7">get_out_ep</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, uint32_t ep_num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function returns pointer to out ep struct with number ep_num. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a8" doxytag="dwc_otg_pcd_intr.c::get_ep_by_addr"></a>
<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a8">get_ep_by_addr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, u16 wIndex)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This functions gets a pointer to an EP from the wIndex address value of the control request. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a9" doxytag="dwc_otg_pcd_intr.c::start_next_request"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a9">start_next_request</a> (<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tasklet. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a10">dwc_otg_pcd_handle_sof_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function handles the SOF Interrupts.  <a href="#a10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a11">dwc_otg_pcd_handle_rx_status_q_level_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function handles the Rx Status Queue Level Interrupt, which indicates that there is a least one packet in the Rx FIFO.  <a href="#a11"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a12">get_ep_of_last_in_token</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function examines the Device IN Token Learning Queue to determine the EP number of the last IN token received.  <a href="#a12"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a13">dwc_otg_pcd_handle_np_tx_fifo_empty_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt occurs when the non-periodic Tx FIFO is half-empty.  <a href="#a13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a14">write_empty_tx_fifo</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called when dedicated Tx FIFO Empty interrupt occurs.  <a href="#a14"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a15">dwc_otg_pcd_stop</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called when the Device is disconnected.  <a href="#a15"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a16" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_i2c_intr"></a>
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a16">dwc_otg_pcd_handle_i2c_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates that ... <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a17" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_early_suspend_intr"></a>
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a17">dwc_otg_pcd_handle_early_suspend_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates that ... <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a18">ep0_out_start</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function configures EPO to receive SETUP packets.  <a href="#a18"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a19">dwc_otg_pcd_handle_usb_reset_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt occurs when a USB Reset is detected.  <a href="#a19"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a20">get_device_speed</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the device speed from the device status register and convert it to USB speed constant.  <a href="#a20"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a21">dwc_otg_pcd_handle_enum_done_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the device status register and set the device speed in the data structure.  <a href="#a21"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a22">dwc_otg_pcd_handle_isoc_out_packet_dropped_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates that the ISO OUT Packet was dropped due to Rx FIFO full or Rx Status Queue Full.  <a href="#a22"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a23">dwc_otg_pcd_handle_end_periodic_frame_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates the end of the portion of the micro-frame for periodic transactions.  <a href="#a23"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a24">dwc_otg_pcd_handle_ep_mismatch_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates that EP of the packet on the top of the non-periodic Tx FIFO does not match EP of the IN Token received.  <a href="#a24"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a25">dwc_otg_pcd_handle_ep_fetsusp_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt is valid only in DMA mode.  <a href="#a25"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a26" doxytag="dwc_otg_pcd_intr.c::ep0_do_stall"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a26">ep0_do_stall</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const int err_val)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This funcion stalls EP0. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a27">do_gadget_setup</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, usb_device_request_t *ctrl)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This functions delegates the setup command to the gadget driver.  <a href="#a27"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a28" doxytag="dwc_otg_pcd_intr.c::do_setup_in_status_phase"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a28">do_setup_in_status_phase</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function starts the Zero-Length Packet for the IN status phase of a 2 stage control transfer. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a29" doxytag="dwc_otg_pcd_intr.c::do_setup_out_status_phase"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a29">do_setup_out_status_phase</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function starts the Zero-Length Packet for the OUT status phase of a 2 stage control transfer. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a30">pcd_clear_halt</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, <a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clear the EP halt (STALL) and if pending requests start the transfer.  <a href="#a30"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a31">do_test_mode</a> (void *data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called when the SET_FEATURE TEST_MODE Setup packet is sent from the host.  <a href="#a31"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a32">do_get_status</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function process the GET_STATUS Setup Commands.  <a href="#a32"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a33">do_set_feature</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function process the SET_FEATURE Setup Commands.  <a href="#a33"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a34">do_clear_feature</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function process the CLEAR_FEATURE Setup Commands.  <a href="#a34"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a35" doxytag="dwc_otg_pcd_intr.c::do_set_address"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a35">do_set_address</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function process the SET_ADDRESS Setup Commands. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a36">pcd_setup</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function processes SETUP commands.  <a href="#a36"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a37" doxytag="dwc_otg_pcd_intr.c::ep0_complete_request"></a>
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a37">ep0_complete_request</a> (<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function completes the ep0 control transfer. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a38">complete_ep</a> (<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function completes the request for the EP.  <a href="#a38"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a39" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_iso_bna"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a39">dwc_otg_pcd_handle_iso_bna</a> (<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function BNA interrupt for Isochronous EPs. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a40">set_current_pkt_info</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function sets latest iso packet information(non-PTI mode).  <a href="#a40"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a41">set_ddma_iso_pkts_info</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *<a class="el" href="structdwc__ep.html">dwc_ep</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function sets latest iso packet information(DDMA mode).  <a href="#a41"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a42">reinit_ddma_iso_xfer</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *<a class="el" href="structdwc__ep.html">dwc_ep</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function reinitialize DMA Descriptors for Isochronous transfer.  <a href="#a42"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a43">handle_iso_out_pkt_dropped</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *<a class="el" href="structdwc__ep.html">dwc_ep</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is to handle Iso EP transfer complete interrupt in case Iso out packet was dropped.  <a href="#a43"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a44">set_iso_pkts_info</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function sets iso packets information(PTI mode).  <a href="#a44"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a45">complete_iso_ep</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, <a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is to handle Iso EP transfer complete interrupt.  <a href="#a45"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a46" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_noniso_bna"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a46">dwc_otg_pcd_handle_noniso_bna</a> (<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function handle BNA interrupt for Non Isochronous EPs. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a47">handle_ep0</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function handles EP0 Control transfers.  <a href="#a47"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a48" doxytag="dwc_otg_pcd_intr.c::restart_transfer"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a48">restart_transfer</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Restart transfer. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a49" doxytag="dwc_otg_pcd_intr.c::predict_nextep_seq"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>predict_nextep_seq</b> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a50" doxytag="dwc_otg_pcd_intr.c::handle_in_ep_disable_intr"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a50">handle_in_ep_disable_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">handle the IN EP disable interrupt. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a51">handle_in_ep_timeout_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handler for the IN EP timeout handshake interrupt.  <a href="#a51"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a52">handle_in_ep_nak_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handler for the IN EP NAK interrupt.  <a href="#a52"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a53">handle_out_ep_babble_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handler for the OUT EP Babble interrupt.  <a href="#a53"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a54">handle_out_ep_nak_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handler for the OUT EP NAK interrupt.  <a href="#a54"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a55">handle_out_ep_nyet_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint32_t epnum)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handler for the OUT EP NYET interrupt.  <a href="#a55"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a56">dwc_otg_pcd_handle_in_ep_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates that an IN EP has a pending Interrupt.  <a href="#a56"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a57">dwc_otg_pcd_handle_out_ep_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This interrupt indicates that an OUT EP has a pending Interrupt.  <a href="#a57"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a58" doxytag="dwc_otg_pcd_intr.c::drop_transfer"></a>
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>drop_transfer</b> (uint32_t trgt_fr, uint32_t curr_fr, uint8_t frm_overrun)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a59">dwc_otg_pcd_handle_incomplete_isoc_in_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Incomplete ISO IN Transfer Interrupt.  <a href="#a59"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a60">dwc_otg_pcd_handle_incomplete_isoc_out_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Incomplete ISO OUT Transfer Interrupt.  <a href="#a60"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a61" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_in_nak_effective"></a>
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a61">dwc_otg_pcd_handle_in_nak_effective</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function handles the Global IN NAK Effective interrupt. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a62" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_out_nak_effective"></a>
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a62">dwc_otg_pcd_handle_out_nak_effective</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">OUT NAK Effective. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd__intr_8c.html#a63">dwc_otg_pcd_handle_intr</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function should be called on every hardware interrupt.  <a href="#a63"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains the implementation of the PCD Interrupt handlers. 
<p>
The PCD handles the device interrupts. Many conditions can cause a device interrupt. When an interrupt occurs, the device interrupt service routine determines the cause of the interrupt and dispatches handling to the appropriate function. These interrupt handling functions are described below. All interrupt registers are processed from LSB to MSB.
<p>
Definition in file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.<hr><h2>Define Documentation</h2>
<a class="anchor" name="a1" doxytag="dwc_otg_pcd_intr.c::CLEAR_IN_EP_INTR"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define CLEAR_IN_EP_INTR          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">__core_if,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>__epnum,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>__intr&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
                <a class="code" href="uniondiepint__data.html">diepint_data_t</a> diepint = {.d32=0}; \
                diepint.<a class="code" href="uniondiepint__data.html#o14">b</a>.__intr = 1; \
                DWC_WRITE_REG32(&amp;__core_if-&gt;dev_if-&gt;in_ep_regs[__epnum]-&gt;diepint, \
                diepint.<a class="code" href="uniondiepint__data.html#o0">d32</a>); \
} <span class="keywordflow">while</span> (0)
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="dwc_otg_pcd_intr.c::CLEAR_OUT_EP_INTR"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define CLEAR_OUT_EP_INTR          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">__core_if,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>__epnum,         <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>__intr&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
                <a class="code" href="uniondoepint__data.html">doepint_data_t</a> doepint = {.d32=0}; \
                doepint.<a class="code" href="uniondoepint__data.html#o17">b</a>.__intr = 1; \
                DWC_WRITE_REG32(&amp;__core_if-&gt;dev_if-&gt;out_ep_regs[__epnum]-&gt;doepint, \
                doepint.<a class="code" href="uniondoepint__data.html#o0">d32</a>); \
} <span class="keywordflow">while</span> (0)
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a10" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_sof_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_sof_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function handles the SOF Interrupts. 
<p>
At this time the SOF Interrupt is disabled. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00298">298</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_rx_status_q_level_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_rx_status_q_level_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function handles the Rx Status Queue Level Interrupt, which indicates that there is a least one packet in the Rx FIFO. 
<p>
The packets are moved from the FIFO to memory, where they will be processed when the Endpoint Interrupt Register indicates Transfer Complete or SETUP Phase Done.<p>
Repeat the following until the Rx Status Queue is empty:<ol type=1>
<li>Read the Receive Status Pop Register (GRXSTSP) to get Packet info</li><li>If Receive FIFO is empty then skip to step Clear the interrupt and exit</li><li>If SETUP Packet call dwc_otg_read_setup_packet to copy the SETUP data to the buffer</li><li>If OUT Data Packet call dwc_otg_read_packet to copy the data to the destination buffer</li></ol>
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000025">Todo:</a></b></dt><dd>NGS Check for buffer overflow?</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00331">331</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="dwc_otg_pcd_intr.c::get_ep_of_last_in_token"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int get_ep_of_last_in_token           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>core_if</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function examines the Device IN Token Learning Queue to determine the EP number of the last IN token received. 
<p>
This implementation is for the Mass Storage device where there are only 2 IN EPs (Control-IN and BULK-IN).<p>
The EP numbers for the first six IN Tokens are in DTKNQR1 and there are 8 EP Numbers in each of the other possible DTKNQ Registers.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller.</td></tr>
  </table>
</dl>
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000026">Todo:</a></b></dt><dd>Find a simpler way to calculate the max queue position.</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00424">424</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_np_tx_fifo_empty_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_np_tx_fifo_empty_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This interrupt occurs when the non-periodic Tx FIFO is half-empty. 
<p>
The active request is checked for the next packet to be loaded into the non-periodic Tx FIFO. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00497">497</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="dwc_otg_pcd_intr.c::write_empty_tx_fifo"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t write_empty_tx_fifo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>epnum</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is called when dedicated Tx FIFO Empty interrupt occurs. 
<p>
The active request is checked for the next packet to be loaded into apropriate Tx FIFO. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00561">561</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_stop"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void dwc_otg_pcd_stop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is called when the Device is disconnected. 
<p>
It stops any active requests and informs the Gadget driver of the disconnect.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000027">Todo:</a></b></dt><dd>NGS Flush Periodic FIFOs</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00619">619</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="dwc_otg_pcd_intr.c::ep0_out_start"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ep0_out_start           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function configures EPO to receive SETUP packets. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000028">Todo:</a></b></dt><dd>NGS: Update the comments from the HW FS. </dd></dl>
<ol type=1>
<li>Program the following fields in the endpoint specific registers for Control OUT EP 0, in order to receive a setup packet</li></ol>
<ul>
<li>DOEPTSIZ0.Packet Count = 3 (To receive up to 3 back to back setup packets)</li><li>DOEPTSIZE0.Transfer Size = 24 Bytes (To receive up to 3 back to back setup packets)<ul>
<li>In DMA mode, DOEPDMA0 Register with a memory address to store any setup packets received</li></ul>
</li></ul>
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pcd</em>&nbsp;</td><td>Programming view of the PCD.</td></tr>
  </table>
</dl>
<p>
put here as for Hermes mode deptisz register should not be written <p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000029">Todo:</a></b></dt><dd>dma needs to handle multiple setup packets (up to 3)</dd></dl>
<p>
DMA Descriptor Setup <p>
DOEPDMA0 Register write <p>
put here as for Hermes mode deptisz register should not be written <p>
DOEPCTL0 Register write 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00732">732</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_usb_reset_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_usb_reset_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This interrupt occurs when a USB Reset is detected. 
<p>
When the USB Reset Interrupt occurs the device state is set to DEFAULT and the EP0 state is set to IDLE.<ol type=1>
<li>Set the NAK bit for all OUT endpoints (DOEPCTLn.SNAK = 1)</li><li>Unmask the following interrupt bits<ul>
<li>DAINTMSK.INEP0 = 1 (Control 0 IN endpoint)</li></ul>
</li></ol>
<ul>
<li>DAINTMSK.OUTEP0 = 1 (Control 0 OUT endpoint)</li><li>DOEPMSK.SETUP = 1</li><li>DOEPMSK.XferCompl = 1</li><li>DIEPMSK.XferCompl = 1</li><li>DIEPMSK.TimeOut = 1</li></ul>
<ol type=1>
<li>Program the following fields in the endpoint specific registers for Control OUT EP 0, in order to receive a setup packet</li></ol>
<ul>
<li>DOEPTSIZ0.Packet Count = 3 (To receive up to 3 back to back setup packets)</li><li>DOEPTSIZE0.Transfer Size = 24 Bytes (To receive up to 3 back to back setup packets)<ul>
<li>In DMA mode, DOEPDMA0 Register with a memory address to store any setup packets received At this point, all the required initialization, except for enabling the control 0 OUT endpoint is done, for receiving SETUP packets. </li></ul>
</li></ul>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l00822">822</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="dwc_otg_pcd_intr.c::get_device_speed"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int get_device_speed           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>core_if</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the device speed from the device status register and convert it to USB speed constant. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01007">1007</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_enum_done_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_enum_done_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read the device status register and set the device speed in the data structure. 
<p>
Set up EP0 to receive SETUP packets by calling dwc_ep0_activate. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01035">1035</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_isoc_out_packet_dropped_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_isoc_out_packet_dropped_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This interrupt indicates that the ISO OUT Packet was dropped due to Rx FIFO full or Rx Status Queue Full. 
<p>
If this interrupt occurs read all the data from the Rx FIFO. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01130">1130</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_end_periodic_frame_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_end_periodic_frame_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This interrupt indicates the end of the portion of the micro-frame for periodic transactions. 
<p>
If there is a periodic transaction for the next frame, load the packets into the EP periodic Tx FIFO. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01156">1156</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_ep_mismatch_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_ep_mismatch_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This interrupt indicates that EP of the packet on the top of the non-periodic Tx FIFO does not match EP of the IN Token received. 
<p>
The "Device IN Token Queue" Registers are read to determine the order the IN Tokens have been received. The non-periodic Tx FIFO is flushed, so it can be reloaded in the order seen in the IN Token Queue. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01184">1184</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_ep_fetsusp_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_ep_fetsusp_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This interrupt is valid only in DMA mode. 
<p>
This interrupt indicates that the core has stopped fetching data for IN endpoints due to the unavailability of TxFIFO space or Request Queue space. This interrupt is used by the application for an endpoint mismatch algorithm.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcd</em>&nbsp;</td><td>The PCD </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01232">1232</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="dwc_otg_pcd_intr.c::do_gadget_setup"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void do_gadget_setup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>usb_device_request_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>ctrl</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This functions delegates the setup command to the gadget driver. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000030">Todo:</a></b></dt><dd>This is a g_file_storage gadget driver specific workaround: a DELAYED_STATUS result from the fsg_setup routine will result in the gadget queueing a EP0 IN status phase for a two-stage control transfer. Exactly the same as a SET_CONFIGURATION/SET_INTERFACE except that this is a class specific request. Need a generic way to know when the gadget driver will queue the status phase. Can we assume when we call the gadget driver setup() function that it will always queue and require the following flag? Need to look into this. </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01277">1277</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="dwc_otg_pcd_intr.c::pcd_clear_halt"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void pcd_clear_halt           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Clear the EP halt (STALL) and if pending requests start the transfer. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000031">Todo:</a></b></dt><dd>FIXME: this causes an EP mismatch in DMA mode. epmismatch not yet implemented.</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01384">1384</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="dwc_otg_pcd_intr.c::do_test_mode"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void do_test_mode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>data</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is called when the SET_FEATURE TEST_MODE Setup packet is sent from the host. 
<p>
The Device Control register is written with the Test Mode bits set to the specified Test Mode. This is done as a tasklet so that the "Status" phase of the control transfer completes before transmitting the TEST packets.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000032">Todo:</a></b></dt><dd>This has not been tested since the tasklet struct was put into the PCD struct! </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01423">1423</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="dwc_otg_pcd_intr.c::do_get_status"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void do_get_status           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function process the GET_STATUS Setup Commands. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000033">Todo:</a></b></dt><dd>check for EP stall</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01460">1460</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="dwc_otg_pcd_intr.c::do_set_feature"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void do_set_feature           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function process the SET_FEATURE Setup Commands. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000034">Todo:</a></b></dt><dd>This has not been tested since the tasklet struct was put into the PCD struct! <p>
Is the gotgctl.devhnpen cleared by a USB Reset?</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01533">1533</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="dwc_otg_pcd_intr.c::do_clear_feature"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void do_clear_feature           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function process the CLEAR_FEATURE Setup Commands. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000035">Todo:</a></b></dt><dd>Add CLEAR_FEATURE for TEST modes.</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01644">1644</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="dwc_otg_pcd_intr.c::pcd_setup"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void pcd_setup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function processes SETUP commands. 
<p>
In Linux, the USB Command processing is done in two places - the first being the PCD and the second in the Gadget Driver (for example, the File-Backed Storage Gadget Driver).<p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td>Command </td><td>Driver </td><td>Description<p>
</td></tr>
<tr>
<td>GET_STATUS </td><td>PCD </td><td>Command is processed as defined in chapter 9 of the USB 2.0 Specification chapter 9 <p>
</td></tr>
<tr>
<td>CLEAR_FEATURE </td><td>PCD </td><td>The Device and Endpoint requests are the ENDPOINT_HALT feature is procesed, all others the interface requests are ignored.<p>
</td></tr>
<tr>
<td>SET_FEATURE </td><td>PCD </td><td>The Device and Endpoint requests are processed by the PCD. Interface requests are passed to the Gadget Driver.<p>
</td></tr>
<tr>
<td>SET_ADDRESS </td><td>PCD </td><td>Program the DCFG reg, with device address received <p>
</td></tr>
<tr>
<td>GET_DESCRIPTOR </td><td>Gadget Driver </td><td>Return the requested descriptor<p>
</td></tr>
<tr>
<td>SET_DESCRIPTOR </td><td>Gadget Driver </td><td>Optional - not implemented by any of the existing Gadget Drivers.<p>
</td></tr>
<tr>
<td>SET_CONFIGURATION </td><td>Gadget Driver </td><td>Disable all EPs and enable EPs for new configuration.<p>
</td></tr>
<tr>
<td>GET_CONFIGURATION </td><td>Gadget Driver </td><td>Return the current configuration<p>
</td></tr>
<tr>
<td>SET_INTERFACE </td><td>Gadget Driver </td><td>Disable all EPs and enable EPs for new configuration.<p>
</td></tr>
<tr>
<td>GET_INTERFACE </td><td>Gadget Driver </td><td>Return the current interface.<p>
</td></tr>
<tr>
<td>SYNC_FRAME </td><td>PCD </td><td>Display debug message. </td></tr>
</table>
<p>
When the SETUP Phase Done interrupt occurs, the PCD SETUP commands are processed by pcd_setup. Calling the Function Driver's setup function from pcd_setup processes the gadget SETUP commands.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000036">Todo:</a></b></dt><dd>handle &gt; 1 setup packet , assert error for now <p>
NGS: Handle bad setup packet?</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l01756">1756</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="dwc_otg_pcd_intr.c::complete_ep"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void complete_ep           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ep</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function completes the request for the EP. 
<p>
If there are additional requests for the EP in the queue they will be started. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02088">2088</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="dwc_otg_pcd_intr.c::set_current_pkt_info"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void set_current_pkt_info           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function sets latest iso packet information(non-PTI mode). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The EP to start the transfer on. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02490">2490</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="dwc_otg_pcd_intr.c::set_ddma_iso_pkts_info"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void set_ddma_iso_pkts_info           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dwc_ep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function sets latest iso packet information(DDMA mode). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dwc_ep</em>&nbsp;</td><td>The EP to start the transfer on.</td></tr>
  </table>
</dl>
<p>
Reinit closed DMA Descriptors<p>
ISO OUT EP <p>
ISO IN EP 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02538">2538</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="dwc_otg_pcd_intr.c::reinit_ddma_iso_xfer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void reinit_ddma_iso_xfer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dwc_ep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function reinitialize DMA Descriptors for Isochronous transfer. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dwc_ep</em>&nbsp;</td><td>The EP to start the transfer on.</td></tr>
  </table>
</dl>
<p>
Buffer 0 descriptors setup <p>
Buffer 1 descriptors setup <p>
Reinit closed DMA Descriptors<p>
ISO OUT EP <p>
ISO IN EP 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02701">2701</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="dwc_otg_pcd_intr.c::handle_iso_out_pkt_dropped"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint32_t handle_iso_out_pkt_dropped           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dwc_ep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is to handle Iso EP transfer complete interrupt in case Iso out packet was dropped. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dwc_ep</em>&nbsp;</td><td>The EP for wihich transfer complete was asserted</td></tr>
  </table>
</dl>
<p>
Re-enable endpoint, clear nak 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02835">2835</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="dwc_otg_pcd_intr.c::set_iso_pkts_info"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">uint32_t set_iso_pkts_info           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function sets iso packets information(PTI mode). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The EP to start the transfer on.</td></tr>
  </table>
</dl>
<p>
Buffer 0 descriptors setup <p>
Buffer 1 descriptors setup 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02906">2906</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="dwc_otg_pcd_intr.c::complete_iso_ep"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void complete_iso_ep           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is to handle Iso EP transfer complete interrupt. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcd</em>&nbsp;</td><td>The PCD </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The EP for which transfer complete was asserted </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l02982">2982</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="dwc_otg_pcd_intr.c::handle_ep0"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void handle_ep0           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function handles EP0 Control transfers. 
<p>
The state of the control tranfers are tracked in <code>ep0state</code>. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03110">3110</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="dwc_otg_pcd_intr.c::handle_in_ep_timeout_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void handle_in_ep_timeout_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>epnum</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handler for the IN EP timeout handshake interrupt. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000037">Todo:</a></b></dt><dd>NGS Check EP type. Implement for Periodic EPs</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03611">3611</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a52" doxytag="dwc_otg_pcd_intr.c::handle_in_ep_nak_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t handle_in_ep_nak_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>epnum</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handler for the IN EP NAK interrupt. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000038">Todo:</a></b></dt><dd>implement ISR</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03672">3672</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a53" doxytag="dwc_otg_pcd_intr.c::handle_out_ep_babble_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t handle_out_ep_babble_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>epnum</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handler for the OUT EP Babble interrupt. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000039">Todo:</a></b></dt><dd>implement ISR</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03697">3697</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a54" doxytag="dwc_otg_pcd_intr.c::handle_out_ep_nak_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t handle_out_ep_nak_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>epnum</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handler for the OUT EP NAK interrupt. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000040">Todo:</a></b></dt><dd>implement ISR</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03723">3723</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a55" doxytag="dwc_otg_pcd_intr.c::handle_out_ep_nyet_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t handle_out_ep_nyet_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>epnum</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handler for the OUT EP NYET interrupt. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000041">Todo:</a></b></dt><dd>implement ISR</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03748">3748</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a56" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_in_ep_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_in_ep_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This interrupt indicates that an IN EP has a pending Interrupt. 
<p>
The sequence for handling the IN EP interrupt is shown below:<ol type=1>
<li>Read the Device All Endpoint Interrupt register</li><li>Repeat the following for each IN EP interrupt bit set (from LSB to MSB).</li><li>Read the Device Endpoint Interrupt (DIEPINTn) register</li><li>If "Transfer Complete" call the request complete function</li><li>If "Endpoint Disabled" complete the EP disable procedure.</li><li>If "AHB Error Interrupt" log error</li><li>If "Time-out Handshake" log error</li><li>If "IN Token Received when TxFIFO Empty" write packet to Tx FIFO.</li><li>If "IN Token EP Mismatch" (disable, this is handled by EP Mismatch Interrupt)</li></ol>
<p>
IN Token received with TxF Empty <p>
IN Token Received with EP mismatch <p>
IN Endpoint NAK Effective <p>
IN EP Tx FIFO Empty Intr <p>
IN EP BNA Intr 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l03786">3786</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a57" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_out_ep_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_out_ep_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This interrupt indicates that an OUT EP has a pending Interrupt. 
<p>
The sequence for handling the OUT EP interrupt is shown below:<ol type=1>
<li>Read the Device All Endpoint Interrupt register</li><li>Repeat the following for each OUT EP interrupt bit set (from LSB to MSB).</li><li>Read the Device Endpoint Interrupt (DOEPINTn) register</li><li>If "Transfer Complete" call the request complete function</li><li>If "Endpoint Disabled" complete the EP disable procedure.</li><li>If "AHB Error Interrupt" log error</li><li>If "Setup Phase Done" process Setup Packet (See Standard USB Command Processing)</li></ol>
<p>
OUT EP BNA Intr 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l04068">4068</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a59" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_incomplete_isoc_in_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_incomplete_isoc_in_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Incomplete ISO IN Transfer Interrupt. 
<p>
This interrupt indicates one of the following conditions occurred while transmitting an ISOC transaction.<ul>
<li>Corrupted IN Token for ISOC EP.</li><li>Packet not complete in FIFO. The follow actions will be taken:<ol type=a>
<li>Determine the EP</li><li>Set incomplete flag in <a class="el" href="structdwc__ep.html">dwc_ep</a> structure</li><li>Disable EP; when "Endpoint Disabled" interrupt is received Flush FIFO </li></ol>
</li></ul>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l04348">4348</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a60" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_incomplete_isoc_out_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_incomplete_isoc_out_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Incomplete ISO OUT Transfer Interrupt. 
<p>
This interrupt indicates that the core has dropped an ISO OUT packet. The following conditions can be the cause:<ul>
<li>FIFO Full, the entire packet would not fit in the FIFO.</li><li>CRC Error</li><li>Corrupted Token The follow actions will be taken:<ol type=a>
<li>Determine the EP</li><li>Set incomplete flag in <a class="el" href="structdwc__ep.html">dwc_ep</a> structure</li><li>Read any data from the FIFO</li><li>Disable EP. When "Endpoint Disabled" interrupt is received re-enable EP. </li></ol>
</li></ul>

<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l04458">4458</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a63" doxytag="dwc_otg_pcd_intr.c::dwc_otg_pcd_handle_intr"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_handle_intr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function should be called on every hardware interrupt. 
<p>
The PCD handles the device interrupts. Many conditions can cause a device interrupt. When an interrupt occurs, the device interrupt service routine determines the cause of the interrupt and dispatches handling to the appropriate function. These interrupt handling functions are described below.<p>
All interrupt registers are processed from LSB to MSB. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd__intr_8c-source.html#l04702">4702</a> of file <a class="el" href="dwc__otg__pcd__intr_8c-source.html">dwc_otg_pcd_intr.c</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 27 03:56:38 2011 for DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>

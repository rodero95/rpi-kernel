<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver: Todo List</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1><a class="anchor" name="todo">Todo List</a></h1><a class="anchor" name="_todo000002"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__attr_8c.html#a56">srp_show</a> (struct device *_dev, struct device_attribute *attr, char *buf) </dt>
<dd>Add code to initiate the SRP. </dd>
</dl>
<p>
<a class="anchor" name="_todo000003"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__attr_8c.html#a58">buspower_show</a> (struct device *_dev, struct device_attribute *attr, char *buf) </dt>
<dd>Need to do more for power on/off? </dd>
</dl>
<p>
<a class="anchor" name="_todo000004"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__attr_8c.html#a60">bussuspend_show</a> (struct device *_dev, struct device_attribute *attr, char *buf) </dt>
<dd>Need to do more for suspend? </dd>
</dl>
<p>
<a class="anchor" name="_todo000005"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__cil_8c.html#a23">dwc_otg_enable_device_interrupts</a> (dwc_otg_core_if_t *core_if) </dt>
<dd>NGS: Should this be a module parameter?</dd>
</dl>
<p>
<a class="anchor" name="_todo000006"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__cil_8c.html#a24">dwc_otg_core_dev_init</a> (dwc_otg_core_if_t *core_if) </dt>
<dd>NGS: Fix Periodic FIFO Sizing! <p>
Finish debug of this <p>
- if the condition needed to be checked or in any case all pending interrutps should be cleared? </dd>
</dl>
<p>
<a class="anchor" name="_todo000007"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__cil_8c.html#a50">dwc_otg_ep0_continue_transfer</a> (dwc_otg_core_if_t *core_if, dwc_ep_t *ep) </dt>
<dd>Should there be check for room in the Tx Status Queue. If not remove the code above this comment.</dd>
</dl>
<p>
<a class="anchor" name="_todo000008"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__cil_8c.html#a52">dwc_otg_ep_write_packet</a> (dwc_otg_core_if_t *core_if, dwc_ep_t *ep, int dma) </dt>
<dd>NGS Where are the Periodic Tx FIFO addresses intialized? What should this be?</dd>
</dl>
<p>
<a class="anchor" name="_todo000009"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__cil_8c.html#a55">dwc_otg_read_packet</a> (dwc_otg_core_if_t *core_if, uint8_t *dest, uint16_t bytes) </dt>
<dd>Account for the case where _dest is not dword aligned. This requires reading data from the FIFO into a uint32_t temp buffer, then moving it into the data buffer. </dd>
</dl>
<p>
<a class="anchor" name="_todo000010"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__cil__intr_8c.html#a15">dwc_otg_handle_disconnect_intr</a> (dwc_otg_core_if_t *core_if) </dt>
<dd>Consolidate this if statement.</dd>
</dl>
<p>
<a class="anchor" name="_todo000011"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__cil__intr_8c.html#a17">dwc_otg_read_common_intr</a> (dwc_otg_core_if_t *core_if) </dt>
<dd>: The port interrupt occurs while in device mode. Added code to CIL to clear the interrupt for now! </dd>
</dl>
<p>
<a class="anchor" name="_todo000012"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__driver_8c.html#a81">MODULE_PARM_DESC</a> (max_transfer_size,"The maximum transfer size supported in bytes 2047-65535") </dt>
<dd>Set the max to 512K, modify checks</dd>
</dl>
<p>
<a class="anchor" name="_todo000013"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__hcd_8c.html#a32">dwc_otg_hcd_hub_control</a> (dwc_otg_hcd_t *dwc_otg_hcd, uint16_t typeReq, uint16_t wValue, uint16_t wIndex, uint8_t *buf, uint16_t wLength) </dt>
<dd>- check how sw can wait for 1 sec to check asesvld???</dd>
</dl>
<p>
<a class="anchor" name="_todo000015"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__hcd_8h.html#a33">dwc_otg_hcd_handle_intr</a> (dwc_otg_hcd_t *dwc_otg_hcd) </dt>
<dd>Implement i2cintr handler.</dd>
</dl>
<p>
<a class="anchor" name="_todo000016"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__hcd_8h.html#a39">dwc_otg_hcd_handle_port_intr</a> (dwc_otg_hcd_t *dwc_otg_hcd) </dt>
<dd>- check if steps performed in 'else' block should be perfromed regardles adp</dd>
</dl>
<p>
<a class="anchor" name="_todo000020"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__hcd_8h.html#a46">dwc_otg_hcd_qh_create</a> (dwc_otg_hcd_t *hcd, dwc_otg_hcd_urb_t *urb, int atomic_alloc) </dt>
<dd>add memflags argument</dd>
</dl>
<p>
<a class="anchor" name="_todo000014"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__hcd_8h.html#a61">dwc_otg_hcd_complete_xfer_ddma</a> (dwc_otg_hcd_t *hcd, dwc_hc_t *hc, dwc_otg_hc_regs_t *hc_regs, dwc_otg_halt_status_e halt_status) </dt>
<dd>Consider the case when period exceeds FrameList size. Frame Rollover interrupt should be used. </dd>
</dl>
<p>
<a class="anchor" name="_todo000017"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__hcd__intr_8c.html#a22">handle_hc_nyet_intr</a> (dwc_otg_hcd_t *hcd, dwc_hc_t *hc, dwc_otg_hc_regs_t *hc_regs, dwc_otg_qtd_t *qtd) </dt>
<dd>add support for isoc release</dd>
</dl>
<p>
<a class="anchor" name="_todo000018"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__hcd__intr_8c.html#a28">handle_hc_chhltd_intr_dma</a> (dwc_otg_hcd_t *hcd, dwc_hc_t *hc, dwc_otg_hc_regs_t *hc_regs, dwc_otg_qtd_t *qtd) </dt>
<dd>This is here because of a possible hardware bug. Spec says that on SPLIT-ISOC OUT transfers in DMA mode that a HALT interrupt w/ACK bit set should occur, but I only see the XFERCOMP bit, even with it masked out. This is a workaround for that behavior. Should fix this when hardware is fixed. </dd>
</dl>
<p>
<a class="anchor" name="_todo000019"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__hcd__queue_8c.html#a8">qh_init</a> (dwc_otg_hcd_t *hcd, dwc_otg_qh_t *qh, dwc_otg_hcd_urb_t *urb) </dt>
<dd>Account for split transfers in the bus time.</dd>
</dl>
<p>
<a class="anchor" name="_todo000021"></a> <dl>
<dt>File <a class="el" href="dwc__otg__pcd_8c.html">dwc_otg_pcd.c</a>  </dt>
<dd>Add Device Mode test modes (Test J mode, Test K mode, etc). <p>
Does it work when the request size is greater than DEPTSIZ transfer size </dd>
</dl>
<p>
<a class="anchor" name="_todo000022"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd_8c.html#a16">dwc_otg_pcd_iso_ep_start</a> (dwc_otg_pcd_t *pcd, void *ep_handle, uint8_t *buf0, uint8_t *buf1, dwc_dma_t dma0, dwc_dma_t dma1, int sync_frame, int dp_frame, int data_per_frame, int start_frame, int buf_proc_intrvl, void *req_handle, int atomic_alloc) </dt>
<dd>- pattern data support is to be implemented in the future</dd>
</dl>
<p>
<a class="anchor" name="_todo000023"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd_8c.html#a22">dwc_otg_pcd_reinit</a> (dwc_otg_pcd_t *pcd) </dt>
<dd>NGS: Add direction to EP, based on contents of HWCFG1. Need a copy of HWCFG1 in pcd structure? sprintf(";r <p>
NGS: Add direction to EP, based on contents of HWCFG1. Need a copy of HWCFG1 in pcd structure? sprintf(";r </dd>
</dl>
<p>
<a class="anchor" name="_todo000024"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd_8c.html#a36">dwc_otg_pcd_ep_queue</a> (dwc_otg_pcd_t *pcd, void *ep_handle, uint8_t *buf, dwc_dma_t dma_buf, uint32_t buflen, int zero, void *req_handle, int atomic_alloc) </dt>
<dd>NGS Create a function for this.</dd>
</dl>
<p>
<a class="anchor" name="_todo000032"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd_8h.html#a19">do_test_mode</a> (void *data) </dt>
<dd>This has not been tested since the tasklet struct was put into the PCD struct! </dd>
</dl>
<p>
<a class="anchor" name="_todo000025"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a11">dwc_otg_pcd_handle_rx_status_q_level_intr</a> (dwc_otg_pcd_t *pcd) </dt>
<dd>NGS Check for buffer overflow?</dd>
</dl>
<p>
<a class="anchor" name="_todo000026"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a12">get_ep_of_last_in_token</a> (dwc_otg_core_if_t *core_if) </dt>
<dd>Find a simpler way to calculate the max queue position.</dd>
</dl>
<p>
<a class="anchor" name="_todo000027"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a15">dwc_otg_pcd_stop</a> (dwc_otg_pcd_t *pcd) </dt>
<dd>NGS Flush Periodic FIFOs</dd>
</dl>
<p>
<a class="anchor" name="_todo000028"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a18">ep0_out_start</a> (dwc_otg_core_if_t *core_if, dwc_otg_pcd_t *pcd) </dt>
<dd>NGS: Update the comments from the HW FS. </dd>
</dl>
<p>
<a class="anchor" name="_todo000029"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a18">ep0_out_start</a> (dwc_otg_core_if_t *core_if, dwc_otg_pcd_t *pcd) </dt>
<dd>dma needs to handle multiple setup packets (up to 3)</dd>
</dl>
<p>
<a class="anchor" name="_todo000030"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a27">do_gadget_setup</a> (dwc_otg_pcd_t *pcd, usb_device_request_t *ctrl) </dt>
<dd>This is a g_file_storage gadget driver specific workaround: a DELAYED_STATUS result from the fsg_setup routine will result in the gadget queueing a EP0 IN status phase for a two-stage control transfer. Exactly the same as a SET_CONFIGURATION/SET_INTERFACE except that this is a class specific request. Need a generic way to know when the gadget driver will queue the status phase. Can we assume when we call the gadget driver setup() function that it will always queue and require the following flag? Need to look into this. </dd>
</dl>
<p>
<a class="anchor" name="_todo000031"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a30">pcd_clear_halt</a> (dwc_otg_pcd_t *pcd, dwc_otg_pcd_ep_t *ep) </dt>
<dd>FIXME: this causes an EP mismatch in DMA mode. epmismatch not yet implemented.</dd>
</dl>
<p>
<a class="anchor" name="_todo000033"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a32">do_get_status</a> (dwc_otg_pcd_t *pcd) </dt>
<dd>check for EP stall</dd>
</dl>
<p>
<a class="anchor" name="_todo000034"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a33">do_set_feature</a> (dwc_otg_pcd_t *pcd) </dt>
<dd>This has not been tested since the tasklet struct was put into the PCD struct! <p>
Is the gotgctl.devhnpen cleared by a USB Reset?</dd>
</dl>
<p>
<a class="anchor" name="_todo000035"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a34">do_clear_feature</a> (dwc_otg_pcd_t *pcd) </dt>
<dd>Add CLEAR_FEATURE for TEST modes.</dd>
</dl>
<p>
<a class="anchor" name="_todo000036"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a36">pcd_setup</a> (dwc_otg_pcd_t *pcd) </dt>
<dd>handle &gt; 1 setup packet , assert error for now <p>
NGS: Handle bad setup packet?</dd>
</dl>
<p>
<a class="anchor" name="_todo000037"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a51">handle_in_ep_timeout_intr</a> (dwc_otg_pcd_t *pcd, const uint32_t epnum) </dt>
<dd>NGS Check EP type. Implement for Periodic EPs</dd>
</dl>
<p>
<a class="anchor" name="_todo000038"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a52">handle_in_ep_nak_intr</a> (dwc_otg_pcd_t *pcd, const uint32_t epnum) </dt>
<dd>implement ISR</dd>
</dl>
<p>
<a class="anchor" name="_todo000039"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a53">handle_out_ep_babble_intr</a> (dwc_otg_pcd_t *pcd, const uint32_t epnum) </dt>
<dd>implement ISR</dd>
</dl>
<p>
<a class="anchor" name="_todo000040"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a54">handle_out_ep_nak_intr</a> (dwc_otg_pcd_t *pcd, const uint32_t epnum) </dt>
<dd>implement ISR</dd>
</dl>
<p>
<a class="anchor" name="_todo000041"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__intr_8c.html#a55">handle_out_ep_nyet_intr</a> (dwc_otg_pcd_t *pcd, const uint32_t epnum) </dt>
<dd>implement ISR</dd>
</dl>
<p>
<a class="anchor" name="_todo000042"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__linux_8c.html#a29">gadget_add_eps</a> (struct gadget_wrapper *d) </dt>
<dd>NGS: What should the max packet size be set to here? Before EP type is set? <p>
NGS: What should the max packet size be set to here? Before EP type is set? <p>
NGS: What should the max packet size be set to here? Before EP type is set? </dd>
</dl>
<p>
<a class="anchor" name="_todo000043"></a> <dl>
<dt>Global <a class="el" href="dwc__otg__pcd__linux_8c.html#a30">dwc_otg_pcd_gadget_release</a> (struct device *dev) </dt>
<dd>Should this do something? Should it free the PCD? </dd>
</dl>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 27 03:56:38 2011 for DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>

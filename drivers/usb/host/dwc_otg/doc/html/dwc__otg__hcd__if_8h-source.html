<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver: dwc_otg_hcd_if.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>dwc_otg_hcd_if.h</h1><a href="dwc__otg__hcd__if_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/* ==========================================================================</span>
00002 <span class="comment"> * $File: //dwh/usb_iip/dev/software/otg/linux/drivers/dwc_otg_hcd_if.h $</span>
00003 <span class="comment"> * $Revision: #12 $</span>
00004 <span class="comment"> * $Date: 2011/10/26 $</span>
00005 <span class="comment"> * $Change: 1873028 $</span>
00006 <span class="comment"> *</span>
00007 <span class="comment"> * Synopsys HS OTG Linux Software Driver and documentation (hereinafter,</span>
00008 <span class="comment"> * "Software") is an Unsupported proprietary work of Synopsys, Inc. unless</span>
00009 <span class="comment"> * otherwise expressly agreed to in writing between Synopsys and you.</span>
00010 <span class="comment"> *</span>
00011 <span class="comment"> * The Software IS NOT an item of Licensed Software or Licensed Product under</span>
00012 <span class="comment"> * any End User Software License Agreement or Agreement for Licensed Product</span>
00013 <span class="comment"> * with Synopsys or any supplement thereto. You are permitted to use and</span>
00014 <span class="comment"> * redistribute this Software in source and binary forms, with or without</span>
00015 <span class="comment"> * modification, provided that redistributions of source code must retain this</span>
00016 <span class="comment"> * notice. You may not view, use, disclose, copy or distribute this file or</span>
00017 <span class="comment"> * any information contained herein except pursuant to this license grant from</span>
00018 <span class="comment"> * Synopsys. If you do not agree with this notice, including the disclaimer</span>
00019 <span class="comment"> * below, then you are not authorized to use the Software.</span>
00020 <span class="comment"> *</span>
00021 <span class="comment"> * THIS SOFTWARE IS BEING DISTRIBUTED BY SYNOPSYS SOLELY ON AN "AS IS" BASIS</span>
00022 <span class="comment"> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
00023 <span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
00024 <span class="comment"> * ARE HEREBY DISCLAIMED. IN NO EVENT SHALL SYNOPSYS BE LIABLE FOR ANY DIRECT,</span>
00025 <span class="comment"> * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span>
00026 <span class="comment"> * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span>
00027 <span class="comment"> * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
00028 <span class="comment"> * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
00029 <span class="comment"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</span>
00030 <span class="comment"> * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH</span>
00031 <span class="comment"> * DAMAGE.</span>
00032 <span class="comment"> * ========================================================================== */</span>
00033 <span class="preprocessor">#ifndef DWC_DEVICE_ONLY</span>
00034 <span class="preprocessor"></span><span class="preprocessor">#ifndef __DWC_HCD_IF_H__</span>
00035 <span class="preprocessor"></span><span class="preprocessor">#define __DWC_HCD_IF_H__</span>
00036 <span class="preprocessor"></span>
00037 <span class="preprocessor">#include "<a class="code" href="dwc__otg__core__if_8h.html">dwc_otg_core_if.h</a>"</span>
00038 
00043 <span class="keyword">struct </span><a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>;
00044 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a> dwc_otg_hcd_t;
00045 
00046 <span class="keyword">struct </span>dwc_otg_hcd_urb;
00047 <span class="keyword">typedef</span> <span class="keyword">struct </span>dwc_otg_hcd_urb dwc_otg_hcd_urb_t;
00048 
<a name="l00053"></a><a class="code" href="dwc__otg__hcd__if_8h.html#a4">00053</a> <span class="keyword">typedef</span> int (*dwc_otg_hcd_start_cb_t) (dwc_otg_hcd_t * hcd);
00054 
<a name="l00056"></a><a class="code" href="dwc__otg__hcd__if_8h.html#a5">00056</a> <span class="keyword">typedef</span> int (*dwc_otg_hcd_disconnect_cb_t) (dwc_otg_hcd_t * hcd);
00057 
<a name="l00059"></a><a class="code" href="dwc__otg__hcd__if_8h.html#a6">00059</a> <span class="keyword">typedef</span> int (*dwc_otg_hcd_hub_info_from_urb_cb_t) (dwc_otg_hcd_t * hcd,
00060                                                    <span class="keywordtype">void</span> *urb_handle,
00061                                                    uint32_t * hub_addr,
00062                                                    uint32_t * port_addr);
<a name="l00064"></a><a class="code" href="dwc__otg__hcd__if_8h.html#a7">00064</a> <span class="keyword">typedef</span> int (*dwc_otg_hcd_speed_from_urb_cb_t) (dwc_otg_hcd_t * hcd,
00065                                                 <span class="keywordtype">void</span> *urb_handle);
00066 
<a name="l00068"></a><a class="code" href="dwc__otg__hcd__if_8h.html#a8">00068</a> <span class="keyword">typedef</span> int (*dwc_otg_hcd_complete_urb_cb_t) (dwc_otg_hcd_t * hcd,
00069                                               <span class="keywordtype">void</span> *urb_handle,
00070                                               dwc_otg_hcd_urb_t * dwc_otg_urb,
00071                                               int32_t status);
00072 
<a name="l00074"></a><a class="code" href="dwc__otg__hcd__if_8h.html#a9">00074</a> <span class="keyword">typedef</span> int (*dwc_otg_hcd_get_b_hnp_enable) (dwc_otg_hcd_t * hcd);
00075 
00076 <span class="keyword">struct </span>dwc_otg_hcd_function_ops {
00077         <a class="code" href="dwc__otg__hcd__if_8h.html#a4">dwc_otg_hcd_start_cb_t</a> start;
00078         <a class="code" href="dwc__otg__hcd__if_8h.html#a5">dwc_otg_hcd_disconnect_cb_t</a> disconnect;
00079         <a class="code" href="dwc__otg__hcd__if_8h.html#a6">dwc_otg_hcd_hub_info_from_urb_cb_t</a> hub_info;
00080         <a class="code" href="dwc__otg__hcd__if_8h.html#a7">dwc_otg_hcd_speed_from_urb_cb_t</a> speed;
00081         <a class="code" href="dwc__otg__hcd__if_8h.html#a8">dwc_otg_hcd_complete_urb_cb_t</a> complete;
00082         <a class="code" href="dwc__otg__hcd__if_8h.html#a9">dwc_otg_hcd_get_b_hnp_enable</a> get_b_hnp_enable;
00083 };
00089 <span class="keyword">extern</span> dwc_otg_hcd_t *<a class="code" href="dwc__otg__hcd_8c.html#a1">dwc_otg_hcd_alloc_hcd</a>(<span class="keywordtype">void</span>);
00090 
00099 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a11">dwc_otg_hcd_init</a>(dwc_otg_hcd_t * hcd, <a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * core_if);
00100 
00105 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a12">dwc_otg_hcd_remove</a>(dwc_otg_hcd_t * hcd);
00106 
00114 <span class="keyword">extern</span> int32_t <a class="code" href="dwc__otg__hcd__intr_8c.html#a0">dwc_otg_hcd_handle_intr</a>(dwc_otg_hcd_t * <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>);
00115 
00122 <span class="keyword">extern</span> <span class="keywordtype">void</span> *<a class="code" href="dwc__otg__hcd__if_8h.html#a14">dwc_otg_hcd_get_priv_data</a>(dwc_otg_hcd_t * hcd);
00123 
00130 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a15">dwc_otg_hcd_set_priv_data</a>(dwc_otg_hcd_t * hcd, <span class="keywordtype">void</span> *priv_data);
00131 
00141 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a16">dwc_otg_hcd_start</a>(dwc_otg_hcd_t * hcd,
00142                              <span class="keyword">struct</span> dwc_otg_hcd_function_ops *fops);
00143 
00150 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a17">dwc_otg_hcd_stop</a>(dwc_otg_hcd_t * hcd);
00151 
00165 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a18">dwc_otg_hcd_hub_control</a>(dwc_otg_hcd_t * <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>,
00166                                    uint16_t typeReq, uint16_t wValue,
00167                                    uint16_t wIndex, uint8_t * buf,
00168                                    uint16_t wLength);
00169 
00175 <span class="keyword">extern</span> uint32_t <a class="code" href="dwc__otg__hcd__if_8h.html#a19">dwc_otg_hcd_otg_port</a>(dwc_otg_hcd_t * hcd);
00176 
00182 <span class="keyword">extern</span> uint16_t <a class="code" href="dwc__otg__hcd__if_8h.html#a20">dwc_otg_get_otg_version</a>(<a class="code" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> * core_if);
00183 
00189 <span class="keyword">extern</span> uint32_t <a class="code" href="dwc__otg__hcd__if_8h.html#a21">dwc_otg_hcd_is_b_host</a>(dwc_otg_hcd_t * hcd);
00190 
00196 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a22">dwc_otg_hcd_get_frame_number</a>(dwc_otg_hcd_t * hcd);
00197 
00203 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a23">dwc_otg_hcd_dump_state</a>(dwc_otg_hcd_t * hcd);
00204 
00213 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a24">dwc_otg_hcd_dump_frrem</a>(dwc_otg_hcd_t * hcd);
00214 
00226 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a25">dwc_otg_hcd_send_lpm</a>(dwc_otg_hcd_t * hcd, uint8_t devaddr,
00227                                 uint8_t hird, uint8_t bRemoteWake);
00228 
00229 <span class="comment">/* URB interface */</span>
00230 
00239 <span class="keyword">extern</span> dwc_otg_hcd_urb_t *<a class="code" href="dwc__otg__hcd__if_8h.html#a26">dwc_otg_hcd_urb_alloc</a>(dwc_otg_hcd_t * hcd,
00240                                                 <span class="keywordtype">int</span> iso_desc_count,
00241                                                 <span class="keywordtype">int</span> atomic_alloc);
00242 
00253 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a27">dwc_otg_hcd_urb_set_pipeinfo</a>(dwc_otg_hcd_urb_t * hcd_urb,
00254                                          uint8_t devaddr, uint8_t ep_num,
00255                                          uint8_t ep_type, uint8_t ep_dir,
00256                                          uint16_t mps);
00257 
00258 <span class="comment">/* Transfer flags */</span>
00259 <span class="preprocessor">#define URB_GIVEBACK_ASAP 0x1</span>
00260 <span class="preprocessor"></span><span class="preprocessor">#define URB_SEND_ZERO_PACKET 0x2</span>
00261 <span class="preprocessor"></span>
00276 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a28">dwc_otg_hcd_urb_set_params</a>(dwc_otg_hcd_urb_t * urb,
00277                                        <span class="keywordtype">void</span> *urb_handle, <span class="keywordtype">void</span> *buf,
00278                                        dwc_dma_t dma, uint32_t buflen, <span class="keywordtype">void</span> *sp,
00279                                        dwc_dma_t sp_dma, uint32_t flags,
00280                                        uint16_t interval);
00281 
00286 <span class="keyword">extern</span> uint32_t <a class="code" href="dwc__otg__hcd__if_8h.html#a29">dwc_otg_hcd_urb_get_status</a>(dwc_otg_hcd_urb_t * dwc_otg_urb);
00287 
00292 <span class="keyword">extern</span> uint32_t <a class="code" href="dwc__otg__hcd__if_8h.html#a30">dwc_otg_hcd_urb_get_actual_length</a>(dwc_otg_hcd_urb_t *
00293                                                   dwc_otg_urb);
00294 
00299 <span class="keyword">extern</span> uint32_t <a class="code" href="dwc__otg__hcd__if_8h.html#a31">dwc_otg_hcd_urb_get_error_count</a>(dwc_otg_hcd_urb_t *
00300                                                 dwc_otg_urb);
00301 
00309 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a32">dwc_otg_hcd_urb_set_iso_desc_params</a>(dwc_otg_hcd_urb_t * dwc_otg_urb,
00310                                                 <span class="keywordtype">int</span> desc_num, uint32_t offset,
00311                                                 uint32_t length);
00312 
00318 <span class="keyword">extern</span> uint32_t <a class="code" href="dwc__otg__hcd__if_8h.html#a33">dwc_otg_hcd_urb_get_iso_desc_status</a>(dwc_otg_hcd_urb_t *
00319                                                     dwc_otg_urb, <span class="keywordtype">int</span> desc_num);
00320 
00326 <span class="keyword">extern</span> uint32_t <a class="code" href="dwc__otg__hcd__if_8h.html#a34">dwc_otg_hcd_urb_get_iso_desc_actual_length</a>(dwc_otg_hcd_urb_t *
00327                                                            dwc_otg_urb,
00328                                                            <span class="keywordtype">int</span> desc_num);
00329 
00341 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a35">dwc_otg_hcd_urb_enqueue</a>(dwc_otg_hcd_t * <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>,
00342                                    dwc_otg_hcd_urb_t * dwc_otg_urb,
00343                                    <span class="keywordtype">void</span> **ep_handle, <span class="keywordtype">int</span> atomic_alloc);
00344 
00350 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a36">dwc_otg_hcd_urb_dequeue</a>(dwc_otg_hcd_t * <a class="code" href="structdwc__otg__hcd.html">dwc_otg_hcd</a>,
00351                                    dwc_otg_hcd_urb_t * dwc_otg_urb);
00352 
00363 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a37">dwc_otg_hcd_endpoint_disable</a>(dwc_otg_hcd_t * hcd, <span class="keywordtype">void</span> *ep_handle,
00364                                         <span class="keywordtype">int</span> retry);
00365 
00366 <span class="comment">/* Resets the data toggle in qh structure. This function can be called from</span>
00367 <span class="comment"> * usb_clear_halt routine.</span>
00368 <span class="comment"> *</span>
00369 <span class="comment"> * @param hcd The HCD</span>
00370 <span class="comment"> * @param ep_handle Endpoint handle, returned by dwc_otg_hcd_urb_enqueue function</span>
00371 <span class="comment"> *</span>
00372 <span class="comment"> * Returns -DWC_E_INVALID if invalid arguments are passed.</span>
00373 <span class="comment"> * Returns 0 on success</span>
00374 <span class="comment"> */</span>
00375 <span class="keyword">extern</span> <span class="keywordtype">int</span> dwc_otg_hcd_endpoint_reset(dwc_otg_hcd_t * hcd, <span class="keywordtype">void</span> *ep_handle);
00376 
00382 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a39">dwc_otg_hcd_is_status_changed</a>(dwc_otg_hcd_t * hcd, <span class="keywordtype">int</span> port);
00383 
00390 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a40">dwc_otg_hcd_is_bandwidth_allocated</a>(dwc_otg_hcd_t * hcd,
00391                                               <span class="keywordtype">void</span> *ep_handle);
00392 
00398 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="dwc__otg__hcd__if_8h.html#a41">dwc_otg_hcd_is_bandwidth_freed</a>(dwc_otg_hcd_t * hcd, <span class="keywordtype">void</span> *ep_handle);
00399 
00406 <span class="keyword">extern</span> uint8_t <a class="code" href="dwc__otg__hcd__if_8h.html#a42">dwc_otg_hcd_get_ep_bandwidth</a>(dwc_otg_hcd_t * hcd,
00407                                             <span class="keywordtype">void</span> *ep_handle);
00408 
00411 <span class="preprocessor">#endif </span><span class="comment">/* __DWC_HCD_IF_H__ */</span>
00412 <span class="preprocessor">#endif </span><span class="comment">/* DWC_DEVICE_ONLY */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Oct 27 03:56:37 2011 for DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>

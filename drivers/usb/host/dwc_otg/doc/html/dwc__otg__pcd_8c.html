<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver: dwc_otg_pcd.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>dwc_otg_pcd.c File Reference</h1>This file implements PCD Core. <a href="#_details">More...</a>
<p>
<code>#include "<a class="el" href="dwc__otg__pcd_8h-source.html">dwc_otg_pcd.h</a>"</code><br>

<p>
<a href="dwc__otg__pcd_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a1" doxytag="dwc_otg_pcd.c::get_ep_from_handle"></a>
<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a1">get_ep_from_handle</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, void *handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Choose endpoint from ep arrays using usb_ep structure. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a2">dwc_otg_request_done</a> (<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep, <a class="el" href="structdwc__otg__pcd__request.html">dwc_otg_pcd_request_t</a> *req, int32_t status)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function completes a request.  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a3" doxytag="dwc_otg_pcd.c::dwc_otg_request_nuke"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a3">dwc_otg_request_nuke</a> (<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function terminates all the requsts in the EP request queue. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a4">dwc_otg_pcd_start</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const struct <a class="el" href="structdwc__otg__pcd__function__ops.html">dwc_otg_pcd_function_ops</a> *fops)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call this to bind the function driver to the PCD Core.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a5">dwc_otg_pcd_start_cb</a> (void *p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PCD Callback function for initializing the PCD when switching to device mode.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a6" doxytag="dwc_otg_pcd.c::cfiw_ep_alloc_buffer"></a>
uint8_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a6">cfiw_ep_alloc_buffer</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, void *pep, dwc_dma_t *addr, size_t buflen, int flags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">CFI-specific buffer allocation function for EP. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a7">dwc_otg_pcd_resume_cb</a> (void *p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PCD Callback function for notifying the PCD when resuming from suspend.  <a href="#a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a8">dwc_otg_pcd_suspend_cb</a> (void *p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PCD Callback function for notifying the PCD device is suspended.  <a href="#a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a9">dwc_otg_pcd_stop_cb</a> (void *p)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PCD Callback function for stopping the PCD when switching to Host mode.  <a href="#a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a10" doxytag="dwc_otg_pcd.c::dwc_otg_ep_alloc_desc_chain"></a>
<a class="el" href="structdwc__otg__dev__dma__desc.html">dwc_otg_dev_dma_desc_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a10">dwc_otg_ep_alloc_desc_chain</a> (dwc_dma_t *dma_desc_addr, uint32_t count)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function allocates a DMA Descriptor chain for the Endpoint buffer to be used for a transfer to/from the specified endpoint. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a11" doxytag="dwc_otg_pcd.c::dwc_otg_ep_free_desc_chain"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a11">dwc_otg_ep_free_desc_chain</a> (<a class="el" href="structdwc__otg__dev__dma__desc.html">dwc_otg_dev_dma_desc_t</a> *desc_addr, uint32_t dma_desc_addr, uint32_t count)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function frees a DMA Descriptor chain that was allocated by ep_alloc_desc. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a12">dwc_otg_iso_ep_start_ddma_transfer</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *<a class="el" href="structdwc__ep.html">dwc_ep</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function initializes a descriptor chain for Isochronous transfer.  <a href="#a12"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a13">dwc_otg_iso_ep_start_buf_transfer</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function initializes a descriptor chain for Isochronous transfer.  <a href="#a13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a14">dwc_otg_iso_ep_start_transfer</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function does the setup for a data transfer for an EP and starts the transfer.  <a href="#a14"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a15">dwc_otg_iso_ep_stop_transfer</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, <a class="el" href="structdwc__ep.html">dwc_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function stops transfer for an EP and resets the ep's variables.  <a href="#a15"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a16">dwc_otg_pcd_iso_ep_start</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, void *ep_handle, uint8_t *buf0, uint8_t *buf1, dwc_dma_t dma0, dwc_dma_t dma1, int sync_frame, int dp_frame, int data_per_frame, int start_frame, int buf_proc_intrvl, void *req_handle, int atomic_alloc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start isochronous transfers on the endpoint referenced by ep_handle.  <a href="#a16"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a17">dwc_otg_pcd_iso_ep_stop</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, void *ep_handle, void *req_handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop ISOC transfers on endpoint referenced by ep_handle.  <a href="#a17"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a18">dwc_otg_iso_buffer_done</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, <a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep, void *req_handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is used for perodical data exchnage between PCD and gadget drivers.  <a href="#a18"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a19">dwc_otg_pcd_get_iso_packet_count</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, void *ep_handle, void *iso_req_handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get ISOC packet count.  <a href="#a19"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a20">dwc_otg_pcd_get_iso_packet_params</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, void *ep_handle, void *iso_req_handle, int packet, int *status, int *actual, int *offset)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get ISOC packet status.  <a href="#a20"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a21" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_init_ep"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>dwc_otg_pcd_init_ep</b> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, <a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *pcd_ep, uint32_t is_in, uint32_t ep_num)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a22">dwc_otg_pcd_reinit</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize ep's.  <a href="#a22"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a23">srp_timeout</a> (void *ptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called when the SRP timer expires.  <a href="#a23"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a24" doxytag="dwc_otg_pcd.c::start_next_request"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a24">start_next_request</a> (<a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Tasklet. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a25" doxytag="dwc_otg_pcd.c::start_xfer_tasklet_func"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>start_xfer_tasklet_func</b> (void *data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a26">dwc_otg_pcd_init</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call this function to get pointer on dwc_otg_pcd_t, this pointer will be used for all PCD API functions.  <a href="#a26"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a27">dwc_otg_pcd_remove</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Frees PCD allocated by dwc_otg_pcd_init.  <a href="#a27"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a28" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_is_dualspeed"></a>
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a28">dwc_otg_pcd_is_dualspeed</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function returns whether device is dualspeed. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a29" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_is_otg"></a>
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a29">dwc_otg_pcd_is_otg</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function returns whether device is otg. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a30" doxytag="dwc_otg_pcd.c::assign_tx_fifo"></a>
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a30">assign_tx_fifo</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function assigns periodic Tx FIFO to an periodic EP in shared Tx FIFO mode. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a31" doxytag="dwc_otg_pcd.c::assign_perio_tx_fifo"></a>
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a31">assign_perio_tx_fifo</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function assigns periodic Tx FIFO to an periodic EP in shared Tx FIFO mode. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a32" doxytag="dwc_otg_pcd.c::release_perio_tx_fifo"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a32">release_perio_tx_fifo</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, uint32_t fifo_num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function releases periodic Tx FIFO in shared Tx FIFO mode. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a33" doxytag="dwc_otg_pcd.c::release_tx_fifo"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a33">release_tx_fifo</a> (<a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *core_if, uint32_t fifo_num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function releases periodic Tx FIFO in shared Tx FIFO mode. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a34">dwc_otg_pcd_ep_enable</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, const uint8_t *ep_desc, void *usb_ep)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enables an endpoint for use.  <a href="#a34"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a35">dwc_otg_pcd_ep_disable</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, void *ep_handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable the endpoint referenced by ep_handle.  <a href="#a35"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a36">dwc_otg_pcd_ep_queue</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, void *ep_handle, uint8_t *buf, dwc_dma_t dma_buf, uint32_t buflen, int zero, void *req_handle, int atomic_alloc)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Queue a data transfer request on the endpoint referenced by ep_handle.  <a href="#a36"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a37">dwc_otg_pcd_ep_dequeue</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, void *ep_handle, void *req_handle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">De-queue the specified data transfer that has not yet completed.  <a href="#a37"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a38">dwc_otg_pcd_ep_halt</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, void *ep_handle, int value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Halt (STALL) an endpoint or clear it.  <a href="#a38"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a39" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_rem_wkup_from_suspend"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a39">dwc_otg_pcd_rem_wkup_from_suspend</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, int set)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function initiates remote wakeup of the host from suspend state. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a40" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_remote_wakeup"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a40">dwc_otg_pcd_remote_wakeup</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, int set)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Starts remote wakeup signaling. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a41" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_disconnect_us"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a41">dwc_otg_pcd_disconnect_us</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd, int no_of_usecs)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Starts micorsecond soft disconnect. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a42">dwc_otg_pcd_wakeup</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function starts the SRP Protocol if no session is in progress.  <a href="#a42"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a43">dwc_otg_pcd_initiate_srp</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initiate SRP.  <a href="#a43"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a44" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_get_frame_number"></a>
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a44">dwc_otg_pcd_get_frame_number</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function returns current frame number. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a45" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_is_lpm_enabled"></a>
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a45">dwc_otg_pcd_is_lpm_enabled</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function returns 1 if LPM support is enabled, and 0 otherwise. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a46" doxytag="dwc_otg_pcd.c::get_b_hnp_enable"></a>
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a46">get_b_hnp_enable</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">These functions allow to get hnp parameters. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a47" doxytag="dwc_otg_pcd.c::get_a_hnp_support"></a>
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>get_a_hnp_support</b> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a48" doxytag="dwc_otg_pcd.c::get_a_alt_hnp_support"></a>
uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>get_a_alt_hnp_support</b> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a49" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_get_rmwkup_enable"></a>
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a49">dwc_otg_pcd_get_rmwkup_enable</a> (<a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *pcd)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function returns 1 if remote wakeup is allowed and 0, otherwise. <br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structdwc__otg__cil__callbacks.html">dwc_otg_cil_callbacks_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dwc__otg__pcd_8c.html#a0">pcd_callbacks</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PCD Callback structure for handling mode switching.  <a href="#a0"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file implements PCD Core. 
<p>
All code in this file is portable and doesn't use any OS specific functions. PCD Core provides Interface, defined in <code>&lt;<a class="el" href="dwc__otg__pcd__if_8h.html">dwc_otg_pcd_if.h</a>&gt;</code> header file, which can be used to implement OS specific PCD interface.<p>
An important function of the PCD is managing interrupts generated by the DWC_otg controller. The implementation of the DWC_otg device mode interrupt service routines is in <a class="el" href="dwc__otg__pcd__intr_8c.html">dwc_otg_pcd_intr.c</a>.<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000021">Todo:</a></b></dt><dd>Add Device Mode test modes (Test J mode, Test K mode, etc). <p>
Does it work when the request size is greater than DEPTSIZ transfer size </dd></dl>

<p>
Definition in file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.<hr><h2>Function Documentation</h2>
<a class="anchor" name="a2" doxytag="dwc_otg_pcd.c::dwc_otg_request_done"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void dwc_otg_request_done           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__otg__pcd__request.html">dwc_otg_pcd_request_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>req</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>status</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function completes a request. 
<p>
It call's the request call back. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00081">81</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_start"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void dwc_otg_pcd_start           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const struct <a class="el" href="structdwc__otg__pcd__function__ops.html">dwc_otg_pcd_function_ops</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>fops</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Call this to bind the function driver to the PCD Core. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcd</em>&nbsp;</td><td>Pointer on dwc_otg_pcd_t returned by dwc_otg_pcd_init function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fops</em>&nbsp;</td><td>The Function Driver Ops data structure containing pointers to all callbacks. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00119">119</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_start_cb"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_start_cb           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
PCD Callback function for initializing the PCD when switching to device mode. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>void pointer to the <code>dwc_otg_pcd_t</code> </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00131">131</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_resume_cb"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_resume_cb           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
PCD Callback function for notifying the PCD when resuming from suspend. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>void pointer to the <code>dwc_otg_pcd_t</code> </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00173">173</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_suspend_cb"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_suspend_cb           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
PCD Callback function for notifying the PCD device is suspended. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>void pointer to the <code>dwc_otg_pcd_t</code> </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00197">197</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_stop_cb"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int32_t dwc_otg_pcd_stop_cb           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
PCD Callback function for stopping the PCD when switching to Host mode. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>void pointer to the <code>dwc_otg_pcd_t</code> </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00216">216</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="dwc_otg_pcd.c::dwc_otg_iso_ep_start_ddma_transfer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void dwc_otg_iso_ep_start_ddma_transfer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>dwc_ep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function initializes a descriptor chain for Isochronous transfer. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dwc_ep</em>&nbsp;</td><td>The EP to start the transfer on.</td></tr>
  </table>
</dl>
<p>
Allocate descriptors for double buffering <p>
ISO OUT EP <p>
Buffer 0 descriptors setup <p>
Buffer 1 descriptors setup <p>
Write dma_ad into DOEPDMA register <p>
ISO IN EP <p>
Buffer 0 descriptors setup <p>
Buffer 1 descriptors setup <p>
Write dma_ad into diepdma register <p>
Enable endpoint, clear nak 
<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00266">266</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="dwc_otg_pcd.c::dwc_otg_iso_ep_start_buf_transfer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void dwc_otg_iso_ep_start_buf_transfer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function initializes a descriptor chain for Isochronous transfer. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The EP to start the transfer on.</td></tr>
  </table>
</dl>
<p>
Enable endpoint, clear nak 
<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00540">540</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="dwc_otg_pcd.c::dwc_otg_iso_ep_start_transfer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void dwc_otg_iso_ep_start_transfer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function does the setup for a data transfer for an EP and starts the transfer. 
<p>
For an IN transfer, the packets will be loaded into the appropriate Tx FIFO in the ISR. For OUT transfers, the packets are unloaded from the Rx FIFO in the ISR.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The EP to start the transfer on. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00623">623</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="dwc_otg_pcd.c::dwc_otg_iso_ep_stop_transfer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void dwc_otg_iso_ep_stop_transfer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>core_if</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__ep.html">dwc_ep_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function stops transfer for an EP and resets the ep's variables. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>core_if</em>&nbsp;</td><td>Programming view of DWC_otg controller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ep</em>&nbsp;</td><td>The EP to start the transfer on. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00664">664</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_iso_ep_start"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int dwc_otg_pcd_iso_ep_start           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep_handle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint8_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf0</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint8_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dwc_dma_t&nbsp;</td>
          <td class="mdname" nowrap> <em>dma0</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dwc_dma_t&nbsp;</td>
          <td class="mdname" nowrap> <em>dma1</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>sync_frame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>dp_frame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>data_per_frame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>start_frame</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>buf_proc_intrvl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>req_handle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>atomic_alloc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Start isochronous transfers on the endpoint referenced by ep_handle. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000022">Todo:</a></b></dt><dd><ul>
<li>pattern data support is to be implemented in the future</li></ul>
</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00708">708</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_iso_ep_stop"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int dwc_otg_pcd_iso_ep_stop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep_handle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>req_handle</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stop ISOC transfers on endpoint referenced by ep_handle. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcd</em>&nbsp;</td><td>The PCD </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ep_handle</em>&nbsp;</td><td>The handle of the endpoint </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>req_handle</em>&nbsp;</td><td>Handle of ISOC request</td></tr>
  </table>
</dl>
Returns -DWC_E_INVALID if incorrect arguments are passed to the function Returns 0 on success 
<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00817">817</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="dwc_otg_pcd.c::dwc_otg_iso_buffer_done"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void dwc_otg_iso_buffer_done           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="structdwc__otg__pcd__ep.html">dwc_otg_pcd_ep_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>req_handle</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used for perodical data exchnage between PCD and gadget drivers. 
<p>
for Isochronous EPs<p>
<ul>
<li>Every time a sync period completes this function is called to perform data exchange between PCD and gadget </li></ul>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00853">853</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_get_iso_packet_count"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int dwc_otg_pcd_get_iso_packet_count           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep_handle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>iso_req_handle</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get ISOC packet count. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcd</em>&nbsp;</td><td>The PCD </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ep_handle</em>&nbsp;</td><td>The handle of the endpoint </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>iso_req_handle</em>&nbsp;</td><td></td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00873">873</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_get_iso_packet_params"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void dwc_otg_pcd_get_iso_packet_params           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep_handle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>iso_req_handle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>status</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>actual</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get ISOC packet status. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcd</em>&nbsp;</td><td>The PCD </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ep_handle</em>&nbsp;</td><td>The handle of the endpoint </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>iso_req_handle</em>&nbsp;</td><td>Isochronoush request handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>Number of packet </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>Out parameter for returning status </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>actual</em>&nbsp;</td><td>Out parameter for returning actual length </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>Out parameter for returning offset </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00889">889</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_reinit"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void dwc_otg_pcd_reinit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize ep's. 
<p>
Initialize the EP0 structure. <p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000023">Todo:</a></b></dt><dd>NGS: Add direction to EP, based on contents of HWCFG1. Need a copy of HWCFG1 in pcd structure? sprintf(";r <p>
NGS: Add direction to EP, based on contents of HWCFG1. Need a copy of HWCFG1 in pcd structure? sprintf(";r </dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00941">941</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="dwc_otg_pcd.c::srp_timeout"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void srp_timeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ptr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is called when the SRP timer expires. 
<p>
The SRP should complete within 6 seconds. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l01000">1000</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_init"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a>* dwc_otg_pcd_init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__core__if.html">dwc_otg_core_if_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>core_if</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Call this function to get pointer on dwc_otg_pcd_t, this pointer will be used for all PCD API functions. 
<p>
Initialize xfer timeout timer. Implemented for 2.93a feature "Device DDMA OUT NAK Enhancement"
<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l01110">1110</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_remove"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void dwc_otg_pcd_remove           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Frees PCD allocated by dwc_otg_pcd_init. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcd</em>&nbsp;</td><td>The PCD </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l01309">1309</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_ep_enable"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int dwc_otg_pcd_ep_enable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const uint8_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep_desc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>usb_ep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Enables an endpoint for use. 
<p>
This function enables an endpoint in the PCD. The endpoint is described by the ep_desc which has the same format as a USB ep descriptor. The ep_handle parameter is used to refer to the endpoint from other API functions and in callbacks. Normally this should be called after a SET_CONFIGURATION/SET_INTERFACE to configure the core for that interface.<p>
Returns -DWC_E_INVALID if invalid parameters were passed. Returns -DWC_E_SHUTDOWN if any other error ocurred. Returns 0 on success.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcd</em>&nbsp;</td><td>The PCD </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ep_desc</em>&nbsp;</td><td>Endpoint descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>usb_ep</em>&nbsp;</td><td>Handle on endpoint, that will be used to identify endpoint. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l01461">1461</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_ep_disable"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int dwc_otg_pcd_ep_disable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep_handle</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Disable the endpoint referenced by ep_handle. 
<p>
Returns -DWC_E_INVALID if invalid parameters were passed. Returns -DWC_E_SHUTDOWN if any other error occurred. Returns 0 on success. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l01622">1622</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_ep_queue"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int dwc_otg_pcd_ep_queue           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep_handle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint8_t *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>dwc_dma_t&nbsp;</td>
          <td class="mdname" nowrap> <em>dma_buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>uint32_t&nbsp;</td>
          <td class="mdname" nowrap> <em>buflen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>zero</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>req_handle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>atomic_alloc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Queue a data transfer request on the endpoint referenced by ep_handle. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000024">Todo:</a></b></dt><dd>NGS Create a function for this.</dd></dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l02079">2079</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_ep_dequeue"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int dwc_otg_pcd_ep_dequeue           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep_handle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>req_handle</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
De-queue the specified data transfer that has not yet completed. 
<p>
Returns -DWC_E_INVALID if invalid parameters were passed. Returns -DWC_E_SHUTDOWN if any other error ocurred. Returns 0 on success. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l02306">2306</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_ep_halt"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int dwc_otg_pcd_ep_halt           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pcd</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ep_handle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Halt (STALL) an endpoint or clear it. 
<p>
Returns -DWC_E_INVALID if invalid parameters were passed. Returns -DWC_E_SHUTDOWN if any other error ocurred. Returns -DWC_E_AGAIN if the STALL cannot be sent and must be tried again later Returns 0 on success. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l02345">2345</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_wakeup"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int dwc_otg_pcd_wakeup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function starts the SRP Protocol if no session is in progress. 
<p>
If a session is already in progress, but the device is suspended, remote wakeup signaling is started. 
<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l02559">2559</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="dwc_otg_pcd.c::dwc_otg_pcd_initiate_srp"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void dwc_otg_pcd_initiate_srp           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__pcd.html">dwc_otg_pcd_t</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pcd</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initiate SRP. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcd</em>&nbsp;</td><td>the pcd structure. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l02596">2596</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a0" doxytag="dwc_otg_pcd.c::pcd_callbacks"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="structdwc__otg__cil__callbacks.html">dwc_otg_cil_callbacks_t</a> <a class="el" href="dwc__otg__pcd_8c.html#a0">pcd_callbacks</a><code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
        .start = dwc_otg_pcd_start_cb,
        .stop = dwc_otg_pcd_stop_cb,
        .suspend = dwc_otg_pcd_suspend_cb,
        .resume_wakeup = dwc_otg_pcd_resume_cb,
        .p = 0,                 
}
</pre></div>PCD Callback structure for handling mode switching. 
<p>

<p>
Definition at line <a class="el" href="dwc__otg__pcd_8c-source.html#l00228">228</a> of file <a class="el" href="dwc__otg__pcd_8c-source.html">dwc_otg_pcd.c</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu Oct 27 03:56:38 2011 for DesignWare USB 2.0 OTG Controller (DWC_otg) Device Driver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
